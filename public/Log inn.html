<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" type="text/css" href = "css/main.css" />
    <link rel="stylesheet" type="text/css" href = "css/login.css" />
    <title>Log In</title>
</head>

<body>
    <h1 class = "listitlogo" >LIST 
    </br> IT</h1>
    <main>
        <section>
            
            
            <div class="form" id = "myForm">
                <h2 style="text-align:center;">LOG IN</h2>
                <p>Username</p>
                <input type="text" id="inpUsername" placeholder="Username">
                <p>Password</p>
                <input type="password" id="inpPwrd" placeholder="Password">  
                <br>
                <br>
                <p>Do you not have a user yet? Click 'create user' to make one!</p>
                <button class="logIn" id="logInBtn">Log In </button>
                <button class = "createUser" id = "createUserBtn"> Create user  </button>
                
            </div>
        </section>
    </main>
</body>

<script>

let inpUsername = document.getElementById('inpUsername');
let inpPwrd = document.getElementById('inpPword');
let logInBtn = document.getElementById('logInBtn');
let createUserBtn = document.getElementById('createUserBtn')



    logInBtn.addEventListener('click', async function(evt){
        
        let url = "http://localhost:3000/user";
    
        let upData = {
        username: inpUsername.value,
        password: inpPwrd.value

    }
        let cfg = {
             method: "POST",
             headers: {"Content-type":"application/json"},
             body: JSON.stringify(upData)
    }
            try {
                var resp = await fetch(url, cfg);
                var data = await resp.json();
            if (resp.status > 202) {
                throw(data);
        };

        sessionStorage.setItem("logindata", JSON.stringify(data));
    }
    catch (err) {
        console.log(err);
    }
}
                        








</script>
</html>